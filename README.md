# SNI Ping & Speed Tester

Этот скрипт на PowerShell тестирует пинг и скорость скачивания/отправки для SNI (Server Name Indication) хостов из whitelist.txt. Полезен для проверки, как твоя связь работает с "белыми" сервисами в России, где интернет блочат хуй знает зачем — якобы от дронов, но на деле от всего, что не одобрено сверху.

## Почему это нужно?
В "великой непобедимой" России мобильный интернет подвергается жёстким ограничениям. В некоторых регионах доступ к ресурсам за пределами белых списков блокируется полностью, в других — скорость искусственно замедляется до непригодных 14 кбит/с (либо скорость ещё меньше, либо вместо интернета полная глухота).  
Если раньше это происходило только во время атак дронов или протестов, то теперь во многих областях это стало почти постоянной практикой. Цель — контролировать информационное поле, оставляя работать только одобренные государством сервисы: банки (Сбербанк, Альфа-банк), карты (Яндекс, 2ГИС), Госуслуги и крупные местные платформы вроде ВК, Авито и Рутуба.  
Скрипт проверяет пинг через HTTP GET (чтобы обойти блокировки ICMP/TCP) и скорость скачивания (пробует разные endpoints, повторяет запросы для мелких файлов). Скорость не всегда точная — зависит от сервера, твоей связи и того, блочит ли провайдер. Если 0 — либо файл не скачался, либо estimation от пинга (хуйня приблизительная).

## Расширенное использование: SNI-спуфинг в VLESS/Trojan + Reality
(Саб)домены из whitelist.txt идеально подходят для SNI-спуфинга (подмены Server Name Indication) в VLESS/Trojan + Reality. Идея в том, чтобы замаскировать трафик под подключение к разрешённому сервису. Подставив «правильный» (саб)домен (например, случайный CDN Яндекса типа `cdnrhkgfkkpupuotntfj.svc.cdn.yandex.net`), можно обойти ограничения. Но это сработает, только если ваш оператор ещё не перешёл на IP/CIDR-вайтлистинг.  

## Установка
1. Скачай репо целиком (включая скрипт, whitelist.txt и start.bat).
2. Убедись, что у тебя PowerShell (Windows/Linux/Mac — работает везде, где PS установлен).
3. Если на Linux/Mac — установи PowerShell:  
   - Linux: `sudo apt update && sudo apt install powershell` (для Ubuntu) или аналог для твоего дистра.  
   - Mac: `brew install --cask powershell`.  
4. Запусти через `start.bat` (двойной клик на Windows, или `./start.bat` на Linux/Mac с установленным PS).  
   Или напрямую в PowerShell: `.\SNITEST.ps1` (на Windows может потребоваться `Set-ExecutionPolicy RemoteSigned`).

Нет зависимостей — чистый PS, без говна.

## Использование
- Если нужно, открой `whitelist.txt` и добавь/убери SNI-хосты (по одному на строку).
- Запусти скрипт.
- Результаты сохраняются в файлы: PingSNI_*.txt, SpeedSNI_*.txt, AllSNI_*.txt (если включено в конфиге).
- Логи ошибок в Errors_*.txt (если включено).

## Конфигурация скрипта
В начале скрипта можно изменить переменные для кастомизации. Вот коротко за что они отвечают:  
- `$maxPing = 1500`: Максимальный приемлемый пинг в мс (для подсчёта "успешных").  
- `$pingAttempts = 2`: Количество попыток пинга на хост (чем больше — точнее, но медленнее).  
- `$timeoutMs = 3000`: Таймаут запроса в мс (если не отвечает — таймаут).  
- `$testSpeed = $true`: Вкл/выкл тест скорости (false — ускорит, если не нужно).  
- `$testPing = $true`: Вкл/выкл тест пинга (false — если только скорость нужна).  
- `$maxDownloads = 10`: Макс. повторений скачивания мелких файлов для точной скорости.  
- `$savePingResults = $true`: Сохранять ли файл с пингами.  
- `$saveSpeedResults = $true`: Сохранять ли файл со скоростями.  
- `$saveAllResults = $true`: Сохранять ли общий файл со всем.  
- `$saveErrorLog = $true`: Сохранять ли логи ошибок.
